<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="liftr">
<title>A Quick Introduction to liftr â€¢ liftr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A Quick Introduction to liftr">
<meta property="og:description" content="liftr">
<meta property="og:image" content="https://liftr.me/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">liftr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/liftr-addins.html">RStudio Addins for liftr</a>
    <a class="dropdown-item" href="../articles/liftr-intro.html">A Quick Introduction to liftr</a>
    <a class="dropdown-item" href="../articles/liftr-tidyverse.html">Explore tidyverse with liftr</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nanxstats/liftr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">

<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>A Quick Introduction to liftr</h1>
                        <h4 data-toc-skip class="author">Nan Xiao &lt;<a href="https://nanx.me" class="external-link uri">https://nanx.me</a>&gt;</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nanxstats/liftr/blob/HEAD/vignettes/liftr-intro.Rmd" class="external-link"><code>vignettes/liftr-intro.Rmd</code></a></small>
      <div class="d-none name"><code>liftr-intro.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In essence, liftr aims to solve the problem of <em>persistent reproducible reporting</em>. To achieve this goal, it extends the <a href="http://rmarkdown.rstudio.com" class="external-link">R Markdown</a> metadata format, and uses Docker to containerize and render R Markdown documents.</p>
</div>
<div class="section level2">
<h2 id="metadata-for-containerization">Metadata for containerization<a class="anchor" aria-label="anchor" href="#metadata-for-containerization"></a>
</h2>
<p>To containerize your R Markdown document, the first step is adding <code>liftr</code> fields to the YAML metadata section of the document. For example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"The Missing Example of liftr"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"Author Name"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">"2021-12-19"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> rmarkdown::html_document</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">liftr</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">maintainer</span><span class="kw">:</span><span class="at"> </span><span class="st">"Maintainer Name"</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">email</span><span class="kw">:</span><span class="at"> </span><span class="st">"name@example.com"</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">from</span><span class="kw">:</span><span class="at"> </span><span class="st">"rocker/r-base:latest"</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pandoc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">texlive</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">sysdeps</span><span class="kw">:</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> gfortran</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">cran</span><span class="kw">:</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> glmnet</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">bioc</span><span class="kw">:</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> Gviz/3.9</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">remotes</span><span class="kw">:</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="st">"nanxstats/liftr"</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">include</span><span class="kw">:</span><span class="at"> </span><span class="st">"DockerfileSnippet"</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>All available metadata fields are expained below.</p>
<div class="section level3">
<h3 id="required-metadata">Required metadata<a class="anchor" aria-label="anchor" href="#required-metadata"></a>
</h3>
<ul>
<li>
<p><code>maintainer</code></p>
<p>Maintainerâ€™s name for the Dockerfile.</p>
</li>
<li>
<p><code>email</code></p>
<p>Maintainerâ€™s email address for the Dockerfile.</p>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="optional-metadata">Optional metadata<a class="anchor" aria-label="anchor" href="#optional-metadata"></a>
</h3>
<ul>
<li>
<p><code>from</code></p>
<p>Base image for building the docker image. Default is <code>"rocker/r-base:latest"</code>. For R users, the images offered by the <a href="https://github.com/rocker-org" class="external-link">rocker project</a> and <a href="https://bioconductor.org/help/docker/" class="external-link">Bioconductor</a> can be considered first.</p>
</li>
<li>
<p><code>pandoc</code></p>
<p>Should we install pandoc in the container? Default is <code>true</code>.</p>
<p>If pandoc was already installed in the base image, this should be set to <code>false</code> to avoid potential errors. For example, for <a href="https://registry.hub.docker.com/u/rocker/rstudio/" class="external-link"><code>rocker/rstudio</code> images</a> and <a href="https://www.bioconductor.org/help/docker/" class="external-link"><code>bioconductor/...</code> images</a>, this option will be automatically set to <code>false</code> since they already have pandoc installed.</p>
</li>
<li>
<p><code>texlive</code></p>
<p>Is TeX environment needed when rendering the document? Default is <code>false</code>. Should be <code>true</code> particularly when the output format is PDF.</p>
</li>
<li>
<p><code>sysdeps</code></p>
<p>Debian/Ubuntu system software packages depended in the document.</p>
<p>Please also include software packages depended by the R packages below. For example, here <code>gfortran</code> is required for compiling <code>glmnet</code>.</p>
</li>
<li>
<p><code>cran</code></p>
<p>CRAN packages depended in the document.</p>
<p>If only <code>pkgname</code> is provided, <code>liftr</code> will install the <em>latest</em> version of the package on CRAN. To improve reproducibility, we recommend to use the package name with a specified version number: <code>pkgname/pkgversion</code> (e.g.Â <code>ggplot2/1.0.0</code>), even if the version is the current latest version. Note: <code>pkgversion</code> must be provided to install the archived versions of packages.</p>
</li>
<li>
<p><code>bioc</code></p>
<p>Bioconductor packages depended in the document. If used, the first packageâ€™s name must be followed by the desired Bioconductor version (e.g.Â <code>Gviz/3.9</code>). All the packages used must be installed from the same Bioconductor version.</p>
</li>
<li>
<p><code>remotes</code></p>
<p>Remote R packages that are not available from CRAN or Bioconductor.</p>
<p>The <a href="https://github.com/hadley/devtools/blob/master/vignettes/dependencies.Rmd" class="external-link">remote package naming specification</a> from devtools is adopted here. Packages can be installed from GitHub, Bitbucket, Git/SVN servers, URLs, etc.</p>
</li>
<li>
<p><code>include</code></p>
<p>The path to a text file that contains custom Dockerfile snippet. The snippet will be included in the generated Dockerfile. This can be used to install additional software packages or further configure the system environment.</p>
<p>Note that this file should be in the same directory as the input R Markdown file.</p>
</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="containerize-the-document">Containerize the document<a class="anchor" aria-label="anchor" href="#containerize-the-document"></a>
</h2>
<p>After adding proper <code>liftr</code> metadata to the document YAML data block, we can use <code><a href="../reference/lift.html">lift()</a></code> to parse the document and generate a Dockerfile.</p>
<p>We will use <a href="https://github.com/nanxstats/liftr/blob/master/inst/examples/liftr-minimal.Rmd" class="external-link">a minimal example</a> included in the liftr package. First, we create a new directory and copy the R Markdown document into the directory:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">path</span> <span class="op">=</span> <span class="st">"~/liftr-minimal/"</span>
<span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/liftr-minimal.Rmd"</span>, package <span class="op">=</span> <span class="st">"liftr"</span><span class="op">)</span>, <span class="va">path</span><span class="op">)</span></code></pre></div>
<p>Then, we use <code><a href="../reference/lift.html">lift()</a></code> to parse the document and generate the Dockerfile:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://nanx.me/liftr/" class="external-link">"liftr"</a></span><span class="op">)</span>

<span class="va">input</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"liftr-minimal.Rmd"</span><span class="op">)</span>
<span class="fu"><a href="../reference/lift.html">lift</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span></code></pre></div>
<p>After successfully running <code><a href="../reference/lift.html">lift()</a></code>, the Dockerfile will be in the <code>~/liftr-minimal/</code> directory.</p>
</div>
<div class="section level2">
<h2 id="render-the-document">Render the document<a class="anchor" aria-label="anchor" href="#render-the-document"></a>
</h2>
<p>Now we can use <code><a href="../reference/render_docker.html">render_docker()</a></code> to render the document into an HTML file, under a Docker container:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/render_docker.html">render_docker</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span></code></pre></div>
<p>The function <code><a href="../reference/render_docker.html">render_docker()</a></code> will parse the Dockerfile, build a new Docker image, and run a Docker container to render the input document. If successfully rendered, the output <code>liftr-minimal.html</code> will be in the <code>~/liftr-minimal/</code> directory. You can also pass additional arguments in <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render</a></code> to this function.</p>
<p>In order to share the dockerized R Markdown document, simply share the <code>.Rmd</code> file. Other users can use the <code><a href="../reference/lift.html">lift()</a></code> and <code><a href="../reference/render_docker.html">render_docker()</a></code> functions to render the document as above.</p>
</div>
<div class="section level2">
<h2 id="housekeeping">Housekeeping<a class="anchor" aria-label="anchor" href="#housekeeping"></a>
</h2>
<p>Normally, the argument <code>prune</code> is set to <code>TRUE</code> in <code><a href="../reference/render_docker.html">render_docker()</a></code>. This means any dangling containers or images due to unsuccessful builds will be automatically cleaned.</p>
<p>To clean up the dangling containers, images, and everything without specifying names, please use <code><a href="../reference/prune_container_auto.html">prune_container_auto()</a></code>, <code><a href="../reference/prune_image_auto.html">prune_image_auto()</a></code>, and <code><a href="../reference/prune_all_auto.html">prune_all_auto()</a></code>.</p>
<p>If you wish to manually remove the Docker container or image (whose information will be stored in an output YAML file) after sucessful rendering, use <code><a href="../reference/prune_container.html">prune_container()</a></code> and <code><a href="../reference/prune_image.html">prune_image()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/prune_image.html">purge_image</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"liftr-minimal.docker.yml"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The above input YAML file contains the basic information of the Docker container, image, and commands to render the document. It is generated by setting <code>purge_info = TRUE</code> (default) in <code><a href="../reference/render_docker.html">render_docker()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="install-docker">Install Docker<a class="anchor" aria-label="anchor" href="#install-docker"></a>
</h2>
<p>Docker is an essential system requirement when using liftr to render the R Markdown documents. <code><a href="../reference/install_docker.html">install_docker()</a></code> will help you find the proper guide to install and set up Docker in your system. To check if Docker is correctly installed, use <code><a href="../reference/check_docker_install.html">check_docker_install()</a></code>; to check if the Docker daemon is running, use <code><a href="../reference/check_docker_running.html">check_docker_running()</a></code>. In particular, Linux users should configure Docker to <a href="https://docs.docker.com/engine/installation/linux/linux-postinstall/" class="external-link">run without sudo</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nan Xiao.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
